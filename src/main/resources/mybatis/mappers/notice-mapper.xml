<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="notice">
	
	<select id="noticeList" resultType="noticeDTO">
		SELECT nno, ndel, nread, nlike, ntitle, ncontent, ndate 
		FROM notice 
		LIMIT 0, 10
	</select>
	
	<select id="noticeDetail" parameterType="noticeDTO" resultType="noticeDTO">
		SELECT nno, ndel, nread, nlike, ntitle, ncontent, ndate 
		FROM notice 
		WHERE nno=#{nno}
	</select>
	
	<insert id="noticeWrite" parameterType="noticeDTO">
		INSERT INTO notice (ntitle, ncontent, mno) 
		VALUES (#{ntitle}, #{ncontent}, (SELECT mno FROM member WHERE mid=#{mid}))
	</insert>
	
	<update id="noticeUpdate" parameterType="noticeDTO">
		UPDATE notice SET ntitle=#{ntitle}, ncontent=#{ncontent} 
		WHERE nno=#{nno} AND mno=(SELECT mno FROM member WHERE mid=#{mid})
	</update>
	
	<update id="noticeDel" parameterType="noticeDTO">
		UPDATE notice SET ndel=0 
		WHERE nno=#{nno} AND mno=(SELECT mno FROM member WHERE mid=#{mid})
	</update>
	
</mapper>